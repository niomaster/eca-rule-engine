IMPORT standaard
IMPORT media_url

CELL 'tweetlistcell_urls' {'event': 'createTweetlistGadget', 'data': [json_serialize({"cell": "tweetlistcell_urls", "id": "myUrlTweetlist", "title": "tweets"})]}

DECLARE bata_gerelateerd = csv_read_kv_dict('modules/bata_gerelateerd.csv',1,0)
DECLARE media_urls = {}

RULE: the_finalization_rule
EVENT: finalize
CONDITION: True
ACTION:	print("done")
	bata_gerelateerd = None

RULE: new_tweet_rule
EVENT: new_tweet
CONDITION: bata_gerelateerd[new_tweet.id] == "Y"
ACTION:	print('1')
	NEWEVENT new_bata_tweet {tweet : new_tweet}

RULE: new_bata_tweet_rule
EVENT: new_bata_tweet
CONDITION: getmediaurl(new_bata_tweet.tweet) != ''
ACTION:	add_tweetlist_tweet('myUrlTweetlist', new_bata_tweet.tweet.json_dict)
	NEWEVENT new_media_url {url : getmediaurl(new_bata_tweet.tweet)}
	print(getmediaurl(new_bata_tweet.tweet))

RULE: new_media_url_rule
EVENT: new_media_url
CONDITION: NOT ( new_media_url.url IN media_urls )
ACTION:	print(new_media_url.url) #laat plaatje op de site zien
	print('3')